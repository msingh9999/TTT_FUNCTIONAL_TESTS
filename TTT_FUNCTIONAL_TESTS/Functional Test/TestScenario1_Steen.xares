<?xml version="1.0" encoding="UTF-8"?>
<XaUnitResult resultType="VERIFICATION_ERROR" containsSimulation="false">
  <ExecutionId>1482c081-7c21-44ff-9eeb-945fbbaef6ec</ExecutionId>
  <Message />
  <AST>
    <XaUnit xmlns="http://www.xact.dk/xatester/v/1" xmlns:data="http://www.xact.dk/xatester/data/v/1">
      <Test>
        <Scope name="File-AID Compare - failure" disabled="false">
          <Job name="File-AID job with differences" jobLocation="JOBDEFINITION">
            <Content><![CDATA[/*JOBPARM SYSAFF=CW01                                                    
//*  YOU ARE VIEWING JCL THAT FILE-AID/MVS HAS GENERATED TO             
//*  COMPARE DATASETS.                                                  
//*                                                                      
//*  YOU CAN CHANGE THIS JCL IF DESIRED AND USE THE SUBMIT PRIMARY      
//*  COMMAND TO SUBMIT THE JOB. THE CREATE OR REPLACE PRIMARY COMMAND   
//*  CAN BE USED TO KEEP THIS JOBSTREAM FOR FUTURE USE.                 
//*                                                                     
//*  USE THE END COMMAND TO EXIT WITHOUT SUBMITTING THE JOB.            
//*                                                                     
//*  COPYRIGHT (C) 2012 BY COMPUWARE CORPORATION, ALL RIGHTS RESERVED.  
//*                                                                     
//FASTEP   EXEC PGM=FILEAID,REGION=08M                                  
//STEPLIB  DD DISP=SHR,DSN=FK.R170000.SMPE.CXVJLOAD                      
//         DD DISP=SHR,DSN=FK.R170000.SMPE.SXVJLOAD                     
//SYSPRINT DD  SYSOUT=*                                                 
//SYSLIST  DD  SYSOUT=*,DCB=(LRECL=183,BLKSIZE=1830)                    
//DD01     DD  DSN=PFHKXC0.FASAMP.EMPLOYEE,                             
//             DISP=SHR                                                 
//DD01C    DD  DSN=PFHKXC0.FASAMP.EMPLOYEE.TWO,                         
//             DISP=SHR                                                  
//DD01CP   DD  DSN=PFHKXC0.FILEAID.CC.D19239.T145602,                   
//             DISP=SHR                                                 
//DD01RL   DD  DSN=PFHKXC0.FASAMP.LAYOUTS,                              
//             DISP=SHR                                                 
//SYSIN    DD  *                                                        
$$DD01 COMPARE                                                          
/*]]></Content>
          </Job>
          <SpoolFile ddname="SYSLIST" stepname="FASTEP" ashex="false" id="spoolId"><![CDATA[»
FILE-AID 17.2   COMPARE CRITERIA CONTENTS REPORT   USERID-SDKSXB0J       DATE 02/09/2019        TIME 09:31:05        PAGE         1
 COMPARE CRITERIA DSN: PFHKXC0.FILEAID.CC.D19239.T145602
===================================================================================================================================
    COMPARE CRITERIA CONTENTS:
    RECORD COMPARE CRITERIA:
            COMPARE TYPE:                                 SORTED
            MAX NUMBER OF RECORDS TO COMPARE:           0  (0 = NO LIMIT)
            MAX NUMBER OF DIFFERENCES TO COMPARE:       0  (0 = NO LIMIT)

===================================================================================================================================
     OLD LAYOUT MEMBER: EMPLOYEE                             NEW !     NEW LAYOUT MEMBER: EMPLOYEE                             OLD
 NUM OLD-RECORD-LAYOUT              START  FORMAT   STATUS  FIELD! NUM NEW-RECORD-LAYOUT              START  FORMAT   STATUS  FIELD
---- ------------------------------ ------ -------- ------- -----!---- ------------------------------ ------ -------- ------- -----
   1 EMPLOYEE-MASTER-FILE                1 GRP  198              !   1 EMPLOYEE-MASTER-FILE                1 GRP  198
   2 EMP-NUMBER                          1 C      5 SYNCKEY     2!   2 EMP-NUMBER                          1 C      5 SYNCKEY     2
                                   SYNCKEY,ORDER=001,ASCENDING   !                                   SYNCKEY,ORDER=001,ASCENDING
                                                                 !
   3 EMP-LAST-NAME                       6 C     15 COMPARE     3!   3 EMP-LAST-NAME                       6 C     15 COMPARE     3
   4 EMP-FIRST-NAME                     21 C     10 COMPARE     4!   4 EMP-FIRST-NAME                     21 C     10 COMPARE     4
   5 EMP-MID-INIT                       31 C      1 COMPARE     5!   5 EMP-MID-INIT                       31 C      1 COMPARE     5
   6 FILLER                             32 C      2 COMPARE     6!   6 FILLER                             32 C      2 COMPARE     6
   7 EMP-TITLE                          34 C     30 COMPARE     7!   7 EMP-TITLE                          34 C     30 COMPARE     7
   8 EMP-EMPSONAL-INFO                  64 GRP   23              !   8 EMP-EMPSONAL-INFO                  64 GRP   23
   9 EMP-NATL-ID-NUMBER                 64 Z   9    COMPARE     9!   9 EMP-NATL-ID-NUMBER                 64 Z   9    COMPARE     9
  10 FILLER                             73 C      1 COMPARE    10!  10 FILLER                             73 C      1 COMPARE    10
  11 EMP-DATE-OF-BIRTH                  74 C      6 COMPARE    11!  11 EMP-DATE-OF-BIRTH                  74 C      6 COMPARE    11
  12 EMP-DATE-OF-BIRTH                  74 C      6 REDEFIN      !  12 EMP-DATE-OF-BIRTH                  74 C      6 REDEFIN
  13 EMP-DOB-REDEF                      74 GRP    6              !  13 EMP-DOB-REDEF                      74 GRP    6
  14 EMP-DOB-MM                         74 Z   2    COMPARE    14!  14 EMP-DOB-MM                         74 Z   2    COMPARE    14
  15 EMP-DOB-DD                         76 Z   2    COMPARE    15!  15 EMP-DOB-DD                         76 Z   2    COMPARE    15
  16 EMP-DOB-YY                         78 Z   2    COMPARE    16!  16 EMP-DOB-YY                         78 Z   2    COMPARE    16
  17 EMP-HIRE-DATE                      80 C      6 COMPARE    17!  17 EMP-HIRE-DATE                      80 C      6 COMPARE    17
  18 EMP-MARITAL-STATUS                 86 C      1 COMPARE    18!  18 EMP-MARITAL-STATUS                 86 C      1 COMPARE    18
  19 EMP-WITHOLD-INFO                   87 GRP   15              !  19 EMP-WITHOLD-INFO                   87 GRP   15
  20 EMP-LIFE-INS-WITHOLD-AMT           87 ZS  4  2 COMPARE    20!  20 EMP-LIFE-INS-WITHOLD-AMT           87 ZS  4  2 COMPARE    20
  21 EMP-NATL-TAX-WITHOLD-PCT           93 PS  3  2 COMPARE    21!  21 EMP-NATL-TAX-WITHOLD-PCT           93 PS  3  2 COMPARE    21
  22 EMP-REGION-TAX-WITHOLD-PCT         96 PS  3  2 COMPARE    22!  22 EMP-REGION-TAX-WITHOLD-PCT         96 PS  3  2 COMPARE    22
  23 EMP-LOCAL-TAX-WITHOLD-PCT          99 PS  3  2 COMPARE    23!  23 EMP-LOCAL-TAX-WITHOLD-PCT          99 PS  3  2 COMPARE    23
  24 EMP-HOME-ADDRESS                  102 GRP   50              !  24 EMP-HOME-ADDRESS                  102 GRP   50
  25 EMP-STREET-ADDRESS                102 C     25 COMPARE    25!  25 EMP-STREET-ADDRESS                102 C     25 COMPARE    25
  26 FILLER                            127 C      1 COMPARE    26!  26 FILLER                            127 C      1 COMPARE    26
  27 EMP-CITY                          128 C     15 COMPARE    27!  27 EMP-CITY                          128 C     15 COMPARE    27
  28 EMP-STATE-PROV-CNTY               143 GRP    4              !  28 EMP-STATE-PROV-CNTY               143 GRP    4
  29 EMP-STATE                         143 C      2 COMPARE    29!  29 EMP-STATE                         143 C      2 COMPARE    29
  30 FILLER                            145 C      2 COMPARE    30!  30 FILLER                            145 C      2 COMPARE    30
  31 EMP-POSTAL-CODE                   147 Z   5    COMPARE    31!  31 EMP-POSTAL-CODE                   147 Z   5    COMPARE    31
  32 EMP-EMERGENCY-CONTACT             152 GRP   47              !  32 EMP-EMERGENCY-CONTACT             152 GRP   47
  33 EMP-CONTACT-NAME                  152 C     25 COMPARE    33!  33 EMP-CONTACT-NAME                  152 C     25 COMPARE    33
  34 FILLER                            177 C      2 COMPARE    34!  34 FILLER                            177 C      2 COMPARE    34
  35 EMP-CON-WORK-PHONE                179 C     10 COMPARE    35!  35 EMP-CON-WORK-PHONE                179 C     10 COMPARE    35
  36 EMP-CON-HOME-PHONE                189 C     10 COMPARE    36!  36 EMP-CON-HOME-PHONE                189 C     10 COMPARE    36
     END OF LAYOUT. LENGTH = 198                                 !     END OF LAYOUT. LENGTH = 198
»
FILE-AID 17.2   COMPARE FIELDS STATISTICS REPORT   USERID-SDKSXB0J       DATE 02/09/2019        TIME 09:31:05        PAGE         1
"OLD" DSN: PFHKXC0.FASAMP.EMPLOYEE                                "NEW" DSN: PFHKXC0.FASAMP.EMPLOYEE.TWO
===================================================================================================================================
 OLD LAYOUT MEMBER: EMPLOYEE         !   NEW LAYOUT MEMBER: EMPLOYEE            NUMBER OF RECORDS CHANGED:                  6
 NUM OLD-RECORD-LAYOUT               !   NUM NEW-RECORD-LAYOUT                  NUMBER OF CHANGES          PERCENT OF RECORDS
---- ------------------------------  !  ---- ------------------------------     -----------------          ------------------
   1 EMPLOYEE-MASTER-FILE            !     1 EMPLOYEE-MASTER-FILE
                                     !
   2 EMP-NUMBER                      !     2 EMP-NUMBER                         SYNCKEY
   3 EMP-LAST-NAME                   !     3 EMP-LAST-NAME                                      2                      33.33%
   4 EMP-FIRST-NAME                  !     4 EMP-FIRST-NAME                                     4                      66.66%
   5 EMP-MID-INIT                    !     5 EMP-MID-INIT
   6 FILLER                          !     6 FILLER
   7 EMP-TITLE                       !     7 EMP-TITLE                                          2                      33.33%
   9 EMP-NATL-ID-NUMBER              !     9 EMP-NATL-ID-NUMBER                                 1                      16.66%
  10 FILLER                          !    10 FILLER
  11 EMP-DATE-OF-BIRTH               !    11 EMP-DATE-OF-BIRTH                                  1                      16.66%
  14 EMP-DOB-MM                      !    14 EMP-DOB-MM                                         1                      16.66%
  15 EMP-DOB-DD                      !    15 EMP-DOB-DD                                         1                      16.66%
  16 EMP-DOB-YY                      !    16 EMP-DOB-YY                                         1                      16.66%
  17 EMP-HIRE-DATE                   !    17 EMP-HIRE-DATE
  18 EMP-MARITAL-STATUS              !    18 EMP-MARITAL-STATUS
  20 EMP-LIFE-INS-WITHOLD-AMT        !    20 EMP-LIFE-INS-WITHOLD-AMT
  21 EMP-NATL-TAX-WITHOLD-PCT        !    21 EMP-NATL-TAX-WITHOLD-PCT
  22 EMP-REGION-TAX-WITHOLD-PCT      !    22 EMP-REGION-TAX-WITHOLD-PCT
  23 EMP-LOCAL-TAX-WITHOLD-PCT       !    23 EMP-LOCAL-TAX-WITHOLD-PCT
  25 EMP-STREET-ADDRESS              !    25 EMP-STREET-ADDRESS
  26 FILLER                          !    26 FILLER
  27 EMP-CITY                        !    27 EMP-CITY                                           1                      16.66%
  29 EMP-STATE                       !    29 EMP-STATE
  30 FILLER                          !    30 FILLER
  31 EMP-POSTAL-CODE                 !    31 EMP-POSTAL-CODE
  33 EMP-CONTACT-NAME                !    33 EMP-CONTACT-NAME                                   1                      16.66%
  34 FILLER                          !    34 FILLER
  35 EMP-CON-WORK-PHONE              !    35 EMP-CON-WORK-PHONE
  36 EMP-CON-HOME-PHONE              !    36 EMP-CON-HOME-PHONE
===================================================================================================================================

                                                ****  E N D  O F  R E P O R T  ****
»
FILE-AID 17.2   COMPARE SUMMARY REPORT             USERID-SDKSXB0J       DATE 02/09/2019        TIME 09:31:05        PAGE         1
"OLD" DSN: PFHKXC0.FASAMP.EMPLOYEE                                "NEW" DSN: PFHKXC0.FASAMP.EMPLOYEE.TWO
===================================================================================================================================
    COMPARE CRITERIA:
            COMPARE MODE:                               FORMATTED
            COBOL LAYOUT USAGE:                         SINGLE
            COBOL DATASET NAME:                         PFHKXC0.FASAMP.LAYOUTS

    REPORT FORMAT PARAMETERS:
            PRINT FORMAT:                               FORMATTED
            MAX NUMBER OF DIFFERENCES TO REPORT:        0  (0 = NO LIMIT)
            PRINT RECORDS SELECTED:                     NO RECORDS SELECTED
            FORMATTED REPORT OPTION:                    COMPARED FIELDS ONLY
            COMPARED FIELDS OPTION:                     CHANGED ONLY
            FIELD STATISTICS REPORT:                    YES

    COMPARE STATISTICS:
            "OLD" DATASET RECORDS READ:                53
            "NEW" DATASET RECORDS READ:                51
            "OLD" DATASET RECORDS COMPARED:            53
            "NEW" DATASET RECORDS COMPARED:            51
            NUMBER OF RECORDS MATCHED:                 43
            NUMBER OF RECORDS CHANGED:                  6
            NUMBER OF RECORDS INSERTED:                 2]]></SpoolFile>
          <Verify name="Verify file-AID compare spool file" haltExecution="false">
            <Statement><![CDATA[println('Finding number of changed records')
var lines = spoolId.split("\n");
println('lines:')+lines.length;
var result = true;
lines.forEach(function(line){
  if(line.indexOf('NUMBER OF RECORDS CHANGED:')!=-1){
    println('Line found:'+line);
    var start = line.indexOf('NUMBER OF RECORDS CHANGED:') + 26;
    var changed = parseInt(line.substring(start).trim());
    println('Number of changed records:'+changed);
    if(changed>0){
      println('Number of changed records are larger than 0. Therefore we fail the test case');
      result=false;
    }else{
      println('No records were changed - success')
    }   
  }
})
result;]]></Statement>
            <Result>The Verify expression was evaluated to false. Expression:println('Finding number of changed records')
var lines = spoolId.split("\n");
println('lines:')+lines.length;
var result = true;
lines.forEach(function(line){
  if(line.indexOf('NUMBER OF RECORDS CHANGED:')!=-1){
    println('Line found:'+line);
    var start = line.indexOf('NUMBER OF RECORDS CHANGED:') + 26;
    var changed = parseInt(line.substring(start).trim());
    println('Number of changed records:'+changed);
    if(changed&gt;0){
      println('Number of changed records are larger than 0. Therefore we fail the test case');
      result=false;
    }else{
      println('No records were changed - success')
    }   
  }
})
result;</Result>
          </Verify>
        </Scope>
      </Test>
    </XaUnit>
  </AST>
  <Context>
    <ExecutionContext xmlns="http://www.xact.dk/xatester/v/1" environment="CW01Batch" logLevel="VERBOSE_E" remote="false" useSimulations="true" uploadResult="false" timeout="300" readTimeout="30" debuggerType="NONE" jobInfoInterval="3" userid="sdksxb0">
      <platformruntime db2id="DB01" database="DB01CW01" driver="com.ibm.db2.jcc.DB2Driver" uri="jdbc:db2://10.10.0.200:746/${database}" environmenttype="BATCH" db2plan="XATESTER" callinterface="NONE" />
      <ExtensionData />
      <XaUnit xmlns:data="http://www.xact.dk/xatester/data/v/1" path="TestScenario1.xaunit">
        <Test>
          <Scope name="File-AID Compare - failure" disabled="false">
            <Job name="File-AID job with differences" jobLocation="JOBDEFINITION">
              <Content><![CDATA[/*JOBPARM SYSAFF=CW01                                                    
//*  YOU ARE VIEWING JCL THAT FILE-AID/MVS HAS GENERATED TO             
//*  COMPARE DATASETS.                                                  
//*                                                                      
//*  YOU CAN CHANGE THIS JCL IF DESIRED AND USE THE SUBMIT PRIMARY      
//*  COMMAND TO SUBMIT THE JOB. THE CREATE OR REPLACE PRIMARY COMMAND   
//*  CAN BE USED TO KEEP THIS JOBSTREAM FOR FUTURE USE.                 
//*                                                                     
//*  USE THE END COMMAND TO EXIT WITHOUT SUBMITTING THE JOB.            
//*                                                                     
//*  COPYRIGHT (C) 2012 BY COMPUWARE CORPORATION, ALL RIGHTS RESERVED.  
//*                                                                     
//FASTEP   EXEC PGM=FILEAID,REGION=08M                                  
//STEPLIB  DD DISP=SHR,DSN=FK.R170000.SMPE.CXVJLOAD                      
//         DD DISP=SHR,DSN=FK.R170000.SMPE.SXVJLOAD                     
//SYSPRINT DD  SYSOUT=*                                                 
//SYSLIST  DD  SYSOUT=*,DCB=(LRECL=183,BLKSIZE=1830)                    
//DD01     DD  DSN=PFHKXC0.FASAMP.EMPLOYEE,                             
//             DISP=SHR                                                 
//DD01C    DD  DSN=PFHKXC0.FASAMP.EMPLOYEE.TWO,                         
//             DISP=SHR                                                  
//DD01CP   DD  DSN=PFHKXC0.FILEAID.CC.D19239.T145602,                   
//             DISP=SHR                                                 
//DD01RL   DD  DSN=PFHKXC0.FASAMP.LAYOUTS,                              
//             DISP=SHR                                                 
//SYSIN    DD  *                                                        
$$DD01 COMPARE                                                          
/*]]></Content>
            </Job>
            <SpoolFile ddname="SYSLIST" stepname="FASTEP" ashex="false" id="spoolId" />
            <Verify name="Verify file-AID compare spool file" haltExecution="false">
              <Statement><![CDATA[println('Finding number of changed records')
var lines = spoolId.split("\n");
println('lines:')+lines.length;
var result = true;
lines.forEach(function(line){
  if(line.indexOf('NUMBER OF RECORDS CHANGED:')!=-1){
    println('Line found:'+line);
    var start = line.indexOf('NUMBER OF RECORDS CHANGED:') + 26;
    var changed = parseInt(line.substring(start).trim());
    println('Number of changed records:'+changed);
    if(changed>0){
      println('Number of changed records are larger than 0. Therefore we fail the test case');
      result=false;
    }else{
      println('No records were changed - success')
    }   
  }
})
result;]]></Statement>
            </Verify>
          </Scope>
        </Test>
      </XaUnit>
      <ExternalResources />
    </ExecutionContext>
  </Context>
  <Started>20190902-15-31-02</Started>
  <Ended>20190902-15-31-11</Ended>
</XaUnitResult>
